<?php                require_once "classes/_Var.php";$Var        =_Var::getInstance();$Var->__autoload("Request","Connection","Cursor","Text","Data");       class Filing{      private $request,              $connection,              $cursor,              $sql,              $text,              $_var,			  $data;      private static  $instance;      	  private function __construct(){	                   $this->request    = Request::getInstance();	                   $this->connection = Connection::getInstance();	                   $this->cursor     = Cursor::getInstance();	                   $this->sql        = Sql::getInstance();	                   $this->text       = Text::getInstance();	                   $this->_var       = _Var::getInstance();					   $this->data       = Data::getInstance();					   $this->connection->connect();	                   $this->request->setVar("OPTION","option");					   $this->request->setVar("INPUT","idInput");                       $this->request->setVar("FIELD","field");                       $this->request->setVar("TABLE","table");                       $this->request->setVar("VALUE","value");                       $this->request->setVar("LIST" ,"optionList");					   $this->request->setVar("COMPANY","Compania");					   $this->request->setVar("ENTITY","Entidad");               		   $this->request->setVar("DATE_INI","FechaIni");              		   $this->request->setVar("DATE_END","FechaFin");              		   $this->request->setVar("CONTRACT","Contrato");              		   $this->request->setVar("NO_CONTRACT","NoContrato");              		   $this->request->setVar("SHOW","Mostrar");					   $this->request->setVar("USER","Usuario");					   $this->request->setVar("DATE_RAD","FechaRad");					   $this->request->setVar("NUM_RAD","NumRad");              		   $this->request->setVar("STRING_S_R","cadenaS_R");					   $this->request->setVar("STRING_F_F","cadenaF_F");					   $this->request->setVar("STRING_R","cadenaR");              		   $this->request->setVar("CONTRACT","Contrato");              		   $this->request->setVar("NO_CONTRACT","NoContrato");              		   $this->request->setVar("INVOICE_I","FacI");					   $this->request->setVar("INVOICE_F","FacF");					   $this->request->setVar("STRING_R_G","cadenaR_G");              		   $this->request->setVar("TYPE_GLOSSE","TipoGlosa");					   $this->request->setVar("CLASS_GLOSSE","ClaseGlosa");					   $this->request->setVar("OBS_GLOSSE","ObservacionGlosa");					   $this->request->setVar("VALUE_GLOSSE","VrGlosa");					   $this->request->setVar("NO_INVOICE","NoFac");					   $this->request->setVar("BALANCE","Saldo");					   $this->request->setVar("TOTAL","VTotal");              		   $this->request->setVar("NO_GLOSSE","NumeroGlosa");					   $this->request->setVar("DATE_GLOSSE","FechaGlosa");					   $this->request->setVar("DATE_NOTICE","FechaNoti");					   $this->request->setVar("STRING_Res_G","cadenaRes_G");					   $this->request->setVar("VALUE_ACCEPTED","ValorAceptado");					   $this->request->setVar("COD_RES_GLOSS","codResGloss");					   $this->request->setVar("ARG_ACCEPTED","ArguAceptado");              		   $this->request->setVar("REPORT_HEADER","EncabezadoInforme");					   $this->request->setVar("SIGNATURE_REPORT","FirmaInforme");					   $this->request->setVar("NO_REPORT","NumeroInforme");					   $this->request->setVar("STRING_R_R_G","cadenaR_R_G");              	 	   $this->request->setVar("STRING_F_R_G","cadenaF_R_G");					   $this->request->setVar("STRING_Rec_G","cadenaRec_G"); 					   $this->request->setVar("STRING_V_A","cadenaV_A");					   $this->request->setVar("STRING_Con_G","cadenaCon_G");					   $this->request->setVar("STRING_V_C","cadenaV_C");					   $this->request->setVar("OBJECTED","Objetado");					   $this->request->setVar("VALUE_EPS","ValorEPS");					   $this->request->setVar("TYPE" ,"type");                     switch($this->request->getVar("OPTION")): 						    case "search":$this->search();break;                            //FILING*************************************************                            case "view":$this->view();break;							case "save":$this->save();break;							case "confirmDelete":$this->confirmDelete();break;							//*******************************************************							//RECEIVING_GLOSSES**************************************							case "receivingGlossesView":$this->receivingGlossesView();break;						    case "confirmMakeGlosses":$this->confirmMakeGlosses();break;							case "saveReasonGlosse":$this->saveReasonGlosse();break;						    case "deleteReasonGlosse":$this->deleteReasonGlosse();break;							case "saveNoticeGlosse":$this->saveNoticeGlosse();break;	  						    //*******************************************************							//RESPONSE_GLOSSES***************************************							case "responseGlossesView":$this->responseGlossesView();break;							case "makeResponseGlosses":$this->makeResponseGlosses();break;						    case "saveMakeResponseGlosse":$this->saveMakeResponseGlosse();break;								case "saveResponseReportGlosses":$this->saveResponseReportGlosses();break;							//*******************************************************							//FILED_RESPONSE_GLOSSES*********************************							case "filedResponseGlossesView":$this->filedResponseGlossesView();break;						    case "filedResponseGlossesSave":$this->filedResponseGlossesSave();break;						    //*******************************************************							//RECEIVING_RESPONSE_GLOSSES*****************************							case "receivingResponseGlossesView":$this->receivingResponseGlossesView();break;								case "confirmMakeReceivingResponseGlosses":$this->confirmMakeReceivingResponseGlosses();break;							case "saveMakeReceivingResponseGlosse":$this->saveMakeReceivingResponseGlosse();break;                            //*******************************************************							//CONCILIATION_RESPONSE_GLOSSES**************************							case "conciliationGlossesView":$this->conciliationGlossesView();break;								case "confirmMakeConciliationGlosses":$this->confirmMakeConciliationGlosses();break;							case "saveMakeConciliationGlosse":$this->saveMakeConciliationGlosse();break;						    //*******************************************************							//REPORT_GLOSSES*****************************************							case "report":$this->report();break;						    //*******************************************************                     endswitch;						$this->connection->close();						   }//End __construct      public  function __destruct(){                       $this->request;                       $this->connection;                       $this->cursor;                       $this->sql;                       $this->text;                       $this->_var;					   $this->data;					             $instance;                       }//End __destruct		      public  static  function getInstance(){                               if(!(self::$instance instanceof self))                                  self::$instance = new self();                               return self::$instance;                                 }//End getInstance                             private function search() {                       $this->text->setBuffer('<option value="">'.$this->text->setLabel("LBL_SELECT").'</option>');					   $this->cursor->consultExecute($this->sql->setSentence("20000",                                                                             $this->request->getVar("VALUE"),                                                                             $this->request->getVar("LIST"),                                                                             $this->request->getVar("TABLE"),                                                                             $this->request->getVar("FIELD"),                                                                             $this->request->getVar("INPUT"),                                                                             $this->request->getVar("LIST")));                       while($this->cursor->next($this->cursor->get()))                             $this->text->setBuffer('<option value="'.$this->cursor->getParameter($this->request->getVar("VALUE")).'">'.$this->cursor->getParameter($this->request->getVar("LIST")).'</option>');                                  $this->cursor->freeResult();					   }//End search method      private function report(){                        !$this->request->getVar("TYPE")?$this->text->setBuffer('<script>Text.hide("contenetor");Text.hide("contenetorAlternate");Text.hide("contenetorContinuous");</script>'):null;;	  					   $this->cursor->consultExecute($this->sql->setSentence("00041",$this->request->getVar("TYPE")));                       $this->cursor->next($this->cursor->get());					   switch($this->cursor->getParameter("tipo")){					          case 10:							  $this->text->setBuffer('<script>Text.show("contenetor");Text.hide("contenetorAlternate");</script>* Estado:|<select class="required" id="type" name="type" '.$this->data->getParameter("GUI_CONTROL").'>										 <option value="">'.$this->text->setLabel("LBL_SELECT").'</option>										 <option value="0">Sin Radicar</option>										 <option value="1">Radicado</option>										 </select>|<input type="hidden" id="type" name="type" value="'.$this->request->getVar("TYPE").'"><script>Text.hide("contenetorContinuous");</script>');							  break;							  case 12:							  $this->text->setBuffer('<script>Text.show("contenetor");Text.show("contenetorAlternate");Text.show("contenetorContinuous");</script>Estado:|<select id="type" name="type" '.$this->data->getParameter("GUI_CONTROL").'>										 <option value="">'.$this->text->setLabel("LBL_SELECT").'</option>										 <option value="0">Sin Responder</option>										 <option value="1">Con Respuesta</option>										 </select>|<input type="hidden" id="type" name="type" value="'.$this->request->getVar("TYPE").'">|');							  $this->text->setBuffer('C&oacute;digo Respuesta EPS:|<select id="codResGlossEPS" name="codResGlossESP" '.$this->data->getParameter("GUI_CONTROL").'>														    <option value="">'.$this->text->setLabel("LBL_SELECT").'</option>');							   $this->cursor->consultExecute($this->sql->setSentence("00050"));					          while($this->cursor->next($this->cursor->get()))						      $this->text->setBuffer('<option value="'.$this->cursor->getParameter("codigo").'">Cod. '.$this->cursor->getParameter("codigo").'-'.$this->cursor->getParameter("detalle").'</option>');							  $this->text->setBuffer('|C&oacute;digo Respuesta IPS:|<select id="codResGlossIPS" name="codResGlossIPS" '.$this->data->getParameter("GUI_CONTROL").'>														    <option value="">'.$this->text->setLabel("LBL_SELECT").'</option>');                              $this->cursor->consultExecute($this->sql->setSentence("00049"));					          while($this->cursor->next($this->cursor->get()))						      $this->text->setBuffer('<option value="'.$this->cursor->getParameter("codigo").'">Cod. '.$this->cursor->getParameter("codigo").'-'.$this->cursor->getParameter("detalle").'</option>');							  break;							  case 13:							  $this->text->setBuffer('<script>Text.hide("contenetor");Text.hide("contenetorContinuous");Text.hide("contenetorAlternate");</script>||<input type="hidden" id="type" name="type" value="'.$this->request->getVar("TYPE").'">||');	                              break;							  case 14:							  $this->text->setBuffer('<script>Text.hide("contenetor");Text.hide("contenetorContinuous");Text.hide("contenetorAlternate");</script>||<input type="hidden" id="type" name="type" value="'.$this->request->getVar("TYPE").'">||');							  break;							  case 15:							  $this->text->setBuffer('<script>Text.hide("contenetor");Text.hide("contenetorContinuous");Text.hide("contenetorAlternate");</script>||<input type="hidden" id="type" name="type" value="'.$this->request->getVar("TYPE").'">||');						      break;							  case 16:							  $this->text->setBuffer('<script>Text.hide("contenetor");Text.hide("contenetorContinuous");Text.hide("contenetorAlternate");</script>||<input type="hidden" id="type" name="type" value="'.$this->request->getVar("TYPE").'">');						      break;							  case 18:							  $this->text->setBuffer('<script>Text.show("contenetor");</script>Tipo Asegurador:|<select id="insurer" name="insurer" '.$this->data->getParameter("GUI_CONTROL").'>														    <option value="">'.$this->text->setLabel("LBL_SELECT").'</option>');							  $this->cursor->consultExecute($this->sql->setSentence("00051"));					          while($this->cursor->next($this->cursor->get()))						      $this->text->setBuffer('<option value="'.$this->cursor->getParameter("codigo").'">Cod. '.$this->cursor->getParameter("codigo").'-'.$this->cursor->getParameter("tipo").'</option>');							  break;					   }//End switch					   $this->cursor->freeResult();					   }//End report method					   	        //FILING*****************************************************************************************************	        private function view() {                       if($this->request->getVar("SHOW")=="SinRadicar"){					     $this->cursor->consultExecute($this->sql->setSentence("00008"));						 $this->cursor->next($this->cursor->get());						 $this->text->setBuffer('<form id="confirmFiling"><table align="center" class="ui-state-default">												 <tr>													   <td class="ui-widget-header"><a href="#" id="filingSave" class="ui-button ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" onclick="Filing.save()"><span class="ui-button-text" >Radicar</span></a></td>													   <td align="right">* No. Radicacion:</td>													   <td><input type="text" class="required" id="NumRad" name="NumRad" '.$this->data->getParameter("GUI_CONTROL").' size="10" value="'.$this->cursor->getParameter("numradicacion").'"></td> 													   <td align="right">Fecha Radicaci&oacute;n:</td>													   <td><input type="text" readonly id="FechaRad" name="FechaRad" '.$this->data->getParameter("GUI_CONTROL").' size="10" value="'.$this->data->setDate("Y","m","d").'"><script>$(function(){Utility.date("FechaRad");});</script></td>          													</tr>												 </table>');						 $this->cursor->freeResult();						 						 $this->text->setBuffer('<script>Data.table("exampleFilingData");</script><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all" id="exampleFilingData">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th><input type="checkbox" id="checkAll" name="checkAll" onclick="Data.checkAll(this.id);" title="Seleccionar Todos"/></th>										<th>Fecha Factura</th>										<th>No. Factura</th>										<th>Entidad</th>										<th>Vr. Factura</th>									</tr>								</thead>								<tbody>');						  if($this->request->getVar("CONTRACT"))   $this->_var->set("CONTRACT"   ,"AND contrato='".$this->request->getVar("CONTRACT")."'");						  if($this->request->getVar("NO_CONTRACT"))$this->_var->set("NO_CONTRACT","AND nocontrato='".$this->request->getVar("NO_CONTRACT")."'");						  $this->cursor->consultExecute($this->sql->setSentence("00006",							  													   $this->request->getVar("COMPANY"),																				   $this->request->getVar("DATE_INI"),																				   $this->request->getVar("DATE_END"),																				   $this->request->getVar("COMPANY"),																				   $this->request->getVar("ENTITY"),																				   $this->_var->get("CONTRACT"),																				   $this->_var->get("NO_CONTRACT")));						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())):							    $this->text->setBuffer('<tr align="center">													    <td>'.$this->_var->get("ID").'</td>														<td><input type="checkbox" id="SinRad_'.$this->_var->get("ID").'" name="SinRad" value="'.$this->cursor->getParameter("nofactura").'" title="Radicar">															<input type="hidden" id="FecFac_'.$this->_var->get("ID").'" name="FecFac" value="'.$this->_var->processExplode(" ",$this->cursor->getParameter("fechacrea"),0).'"></td>													    <td>'.$this->_var->processExplode(" ",$this->cursor->getParameter("fechacrea"),0).'</td>													    <td>'.$this->cursor->getParameter("nofactura").'</td>													    <td>'.$this->cursor->getParameter("noment").'</td>													    <td align="right">'.$this->cursor->getDecimal("total").'</td>													    </tr>');						  $this->_var->increment("ID");						  endwhile;						  $this->cursor->freeResult();						  if($this->_var->get("ID",1)==1)						     $this->text->setBuffer('<script>Utility.acceptBox("'.$this->_var->format($this->text->setLabel("MSG_THERE_NOT"),"Facturas Sin Radicar").'");</script>');						 $this->text->setBuffer('</tbody></table><input type="hidden" id="FechaAtc" name="FechaAct" value="'.$this->data->setDate("Y","m","d").'">																 <input type="hidden" id="TamanioSR" name="TamanioSR" value="'.$this->_var->get("ID").'"></form>');						 }//End if											   if($this->request->getVar("SHOW")=="Radicado"){					      $this->text->setBuffer('<form id="confirmFilingDelete"><table align="left" class="ui-state-default">												 <tr>													   <td class="ui-widget-header"><a href="#" id="filingDelete" class="ui-button ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" onclick="Filing._delete()"><span class="ui-button-text" >Eliminar Radicaci&oacute;n</span></a></td>											     </tr>																									 </table>');					      $this->text->setBuffer('<script>Data.table("exampleFilingData");</script><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all" id="exampleFilingData">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th><input type="checkbox" id="checkAll" name="checkAll" onclick="Data.checkAll(this.id);" title="Seleccionar Todos"/></th>										<th>Fecha Factura</th>										<th>No. Factura</th>										<th>Entidad</th>										<th>Vr. Factura</th>										<th>Fecha Radicado</th>										<th>Diferencia D&iacute;as</th>									</tr>								</thead>								<tbody>');							  if($this->request->getVar("CONTRACT"))   $this->_var->set("CONTRACT"   ,"AND contrato='".$this->request->getVar("CONTRACT")."'");						  if($this->request->getVar("NO_CONTRACT"))$this->_var->set("NO_CONTRACT","AND nocontrato='".$this->request->getVar("NO_CONTRACT")."'");						  						  				          $this->cursor->consultExecute($this->sql->setSentence("00004",							  													   $this->request->getVar("COMPANY"),																				   $this->request->getVar("DATE_INI"),																				   $this->request->getVar("DATE_END"),																				   $this->request->getVar("COMPANY"),																				   $this->request->getVar("ENTITY"),																				   $this->_var->get("CONTRACT"),																				   $this->_var->get("NO_CONTRACT")));								  						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())):   							    $this->text->setBuffer('<tr align="center">													    <td>'.$this->_var->get("ID").'</td>														<td><input type="checkbox" id="Rad_'.$this->cursor->getParameter("nofactura").'" name="Rad" title="Eliminar Radiacaci&oacute;n" value="'.$this->cursor->getParameter("nofactura").'"></td>													    <td>'.$this->_var->processExplode(" ",$this->cursor->getParameter("fechacrea"),0).'</td>													    <td>'.$this->cursor->getParameter("nofactura").'</td>													    <td>'.$this->cursor->getParameter("noment").'</td>													    <td align="right">'.$this->cursor->getDecimal("total").'</td>													    <td>'.$this->cursor->getParameter("fecharadic").'</td>													    <td>'.$this->data->setDifferenceDays($this->cursor->getParameter("fechacrea"),$this->cursor->getParameter("fecharadic")).'</td>													    </tr>');						        $this->_var->increment("ID");						        endwhile;						  $this->cursor->freeResult();								  if($this->_var->get("ID")==1)						    $this->text->setBuffer('<script>Utility.acceptBox("'.$this->_var->format($this->text->setLabel("MSG_THERE_NOT"),"Facturas Radicadas").'");</script>');						  $this->text->setBuffer('</tbody></table><form></div>');						  }//End if				                       }//End view method 	  private function save(){                       $this->_var->set("STRING_S_R",1);					   for($this->_var->get("STRING_S_R")-1;						   $this->_var->get("STRING_S_R")-1<$this->_var->getSize($this->fetchStringS_R=$this->_var->getExplode(",",$this->request->getVar("STRING_S_R")));						   $this->_var->setElementAtList($this->fetchStringS_R[$this->_var->get("STRING_S_R")-1]),						   $this->_var->increment("STRING_S_R"));					   $this->_var->set("STRING_F_F",1);					   for($this->_var->get("STRING_F_F")-1;						   $this->_var->get("STRING_F_F")-1<$this->data->getSize($this->fetchStringF_F=$this->_var->getExplode(",",$this->request->getVar("STRING_F_F")));						   $this->data->setElementAtList($this->fetchStringF_F[$this->_var->get("STRING_F_F")-1]),						   $this->_var->increment("STRING_F_F"));	   					   $this->_var->set("SAVE",1);					   for($this->_var->get("SAVE")-1;						   $this->_var->get("SAVE")-1<$this->_var->getSize($this->_var->getSizeList());						   $this->addFiling($this->_var->getElementAtList($this->_var->get("SAVE")-1),$this->data->getElementAtList($this->_var->get("SAVE")-1)),						   $this->_var->increment("SAVE"));					   }//End save method	  private function addFiling($facNumber=null,$fecFac=null){                       if(!$this->request->getVar("DATE_RAD"))					      $this->_var->set("DATE_RAD",$this->data->setDate("Y","m","d"));						  else						      $this->_var->set("DATE_RAD",$this->request->getVar("DATE_RAD"));									   !$this->request->getVar("NUM_RAD")?$this->_var->set("NUM_RAD","null"):$this->_var->set("NUM_RAD",$this->request->getVar("NUM_RAD"));;					   $this->cursor->consultExecute($this->sql->setSentence("00009",$this->_var->get('DATE_RAD'),$this->request->getVar('USER'),$this->_var->get("NUM_RAD"),$this->data->setTime(),$facNumber,$this->request->getVar('COMPANY')));				       $this->cursor->consultExecute($this->sql->setSentence("00000",$facNumber));                       $this->cursor->next($this->cursor->get());                       if($this->cursor->getParameter("compcontable")&&$this->cursor->getParameter("nocompcontable")){//00001 					      $this->cursor->consultExecute($this->sql->setSentence("00047",$facNumber,/*$fecFac*/$this->cursor->getParameter("fecharadic"),$this->_var->get("DATE_RAD")));				          //$this->cursor->consultExecute($this->sql->setSentence("00002",$facNumber,$this->_var->get("DATE_RAD")));						  $fac0=0;						  $this->cursor->consultExecute($this->sql->setSentence("00003",$facNumber,$facNumber,$facNumber));						  $this->cursor->get()?$this->text->setBuffer(1):$this->text->setBuffer(0);;						  }//End if						  else $this->cursor->consultExecute($this->sql->setSentence("00002",$facNumber,$this->_var->get("DATE_RAD")));		                       $this->cursor->freeResult();                       }//End addFiling method					   	  private function confirmDelete(){                       $this->cursor->consultExecute($this->sql->setSentence("00010",$this->request->getVar("USER"),$this->request->getVar("COMPANY"),$this->request->getVar("DATE_INI"),$this->request->getVar("DATE_END"),$this->_var->getSubtract($this->request->getVar("STRING_R"),1)));                       $this->cursor->get()?@$this->text->setBuffer(1):@$this->text->setBuffer(0);;					   $this->cursor->freeResult();                       }//End delete method      //***********************************************************************************************************      //RECEIVING_GLOSSES******************************************************************************************	  private function receivingGlossesView() {                       $this->text->setBuffer('<script>Data.table("exampleReceivingGlossesData");</script><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all" id="exampleReceivingGlossesData">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th title="Glosar">G</th>										<th>No Factura</th>										<th>Fecha Factura</th>										<th>Fecha Radicaci&oacute;n</th>										<th>Entidad</th>										<th>Valor Factura</th>										<th>Valor Glosa</th>										<th>Fecha</th>										<th>N&uacute;mero de Documento</th>										<th>Fecha Notificaci&oacute;n Glosa</th>									</tr>								</thead>								<tbody>');							                          if($this->request->getVar("INVOICE_I"))  $this->_var->set("INVOICE_I"  ,"AND nofactura>='".$this->request->getVar("INVOICE_I")."'");						  if($this->request->getVar("INVOICE_F"))  $this->_var->set("INVOICE_F"  ,"AND nofactura<='".$this->request->getVar("INVOICE_F")."'");						  if($this->request->getVar("ENTITY"))     $this->_var->set("ENTITY"     ,"AND entidad='".$this->request->getVar("ENTITY")."'");						  if($this->request->getVar("CONTRACT"))   $this->_var->set("CONTRACT"   ,"AND contrato='".$this->request->getVar("CONTRACT")."'");						  if($this->request->getVar("NO_CONTRACT"))$this->_var->set("NO_CONTRACT","AND nocontrato='".$this->request->getVar("NO_CONTRACT")."'");						  $this->cursor->consultExecute($this->sql->setSentence("00012",							  													   $this->request->getVar("COMPANY"),																				   $this->request->getVar("DATE_INI"),																				   $this->request->getVar("DATE_END"),																				   $this->request->getVar("COMPANY"),	  																				   $this->_var->get("INVOICE_I"),																				   $this->_var->get("INVOICE_F"),																				   $this->_var->get("ENTITY"),																				   $this->_var->get("CONTRACT"),																				   $this->_var->get("NO_CONTRACT")));						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())):							    $this->text->setBuffer('<tr align="center">													    <td>'.$this->_var->get("ID").'</td>														<td><input type="radio" id="Glosar_'.$this->_var->get("ID").'" name="Glosar" value="'.$this->cursor->getParameter("nofactura").'/'.$this->cursor->getParameter("total").'/'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'" title="Glosar" onClick="Filing.makeGlosses(true)"></td>														<td>'.$this->cursor->getParameter("nofactura").'</td>													    <td>'.$this->_var->processExplode(" ",$this->cursor->getParameter("fechacrea"),0).'</td>														<td>'.$this->cursor->getParameter("fecharadic").'</td>														<td align="right">'.$this->cursor->getParameter("noment").'</td>														<td align="right">'.$this->cursor->getDecimal("total").'</td>														<td align="right">'.$this->cursor->getDecimal("gloss_val").'</td>														<td>'.$this->cursor->getParameter("fecharasis").'</td>														<td>'.$this->cursor->getParameter("numero").'</td>														<td>'.$this->cursor->getParameter("fechanotificacion").'														<input type="hidden" id="invoiceData" name="invoiceData" value="'.$this->cursor->getParameter("nofactura").'"></td></tr>');						  $this->_var->increment("ID");						  endwhile;						  $this->cursor->freeResult();						  if($this->_var->get("ID",1)==1)						     $this->text->setBuffer('<script>Utility.acceptBox("'.$this->_var->format($this->text->setLabel("MSG_THERE_NOT"),"Facturas Sin Radicar").'");</script>');						 $this->text->setBuffer('</tbody></table>');			                       }//End view method				   	  private function confirmMakeGlosses(){	                   $this->cursor->consultExecute($this->sql->setSentence("00042",																			 $this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),3),																			 $this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),0)));					   $this->cursor->next($this->cursor->get());					   if($this->cursor->getParameter("vrglosa")){													 			 					   $this->cursor->consultExecute($this->sql->setSentence("00025",$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),0)));	                   $this->cursor->next($this->cursor->get());$this->text->setBuffer('<script>Utility.easyJQ("special","draggable");</script>				 <div id="special" '.$this->data->getParameter("GUI_TOP_RIGHT").'>				    <table '.$this->data->getParameter("GUI").' class="ui-widget-content  ui-corner-all">					    <tr align="center">								<td class="ui-widget-header ui-corner-all" colspan="2" height="40px" style="cursor:move;">'.$this->text->setLabel("MSG_FILL_OUT").'</td>       						</tr>						<tr>						  <td>					<form id="saveNoticeGlosse">						<table class="ui-state-highlight ui-corner-all">					<tr>					   <td width="100%" class="ui-state-default" align="right">N&uacute;mero Documento:</td>  		               <td><input type="text" class="required" id="NumeroGlosa" name="NumeroGlosa" value="'.$this->cursor->getParameter("numero").'"></td> 					</tr>					   <td class="ui-state-default" align="right">Creaci&oacute;n Documento:</td>					   <td><input type="Text" class="required" id="FechaGlosa" name="FechaGlosa" size="10" readonly value="'.$this->cursor->getParameter("fecharasis").'"><script>$(function(){Utility.date("FechaGlosa");});</script></td>					</tr>					<tr>					   <td class="ui-state-default" align="right">Recibo Notificacion:</td>					   <td><input type="Text" class="required" id="FechaNoti" name="FechaNoti" size="10" readonly value="'.$this->cursor->getParameter("fechanotificacion").'"><script>$(function(){Utility.date("FechaNoti");});</script></td>				            </tr>		            <tr class="ui-state-default" align="center">				               <td colspan="6"><a href="#" id="filingSaveNoticeGlosse" class="ui-button ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" onClick="Filing.saveNoticeGlosse()"><span class="ui-button-text" >Guardar</span></a></td>		            </tr>	              </table>				  <input type="hidden" id="Usuario" name="Usuario" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),2).'">				  <input type="hidden" id="Compania" name="Compania" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),3).'">				  <input type="hidden" id="NoFac" name="NoFac" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),0).'">				  </form></td></tr></table></div>');				  }//End if$this->text->setBuffer('<table width="100%" align="center">           <tr>             <td><form id="saveReasonGlosse">                 <table width="100%" class="ui-corner-all">				    <tr>	                        <td width="20%" class="ui-state-default" align="right">No. Fac:</td>            	          <td width="50%" class="ui-state-active">'.$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),0).'</td>                           </tr>                    <tr>	                        <td class="ui-state-default" align="right" height="5px" style="vertical-align:sub;">* C&oacute;digo Glosa:</td>            	          <td><input class="required" type="text" id="TipoGlosa" name="TipoGlosa" size="10" '.$this->data->getParameter("GUI_CONTROL").' value="" onKeyUp="xajax_autocompleta(this.value)">                          <div id="divSugerencias" style="margin-top:3px;"></div></td> 						                      </tr>                    <tr>                       <td class="ui-state-default" align="right" height="5px" style="vertical-align:sub;">* Tipo Auditor&iacute;a:</td>					<td>					    <select class="required" name="ClaseGlosa" id="ClaseGlosa" '.$this->data->getParameter("GUI_CONTROL").' onChange="">           	            <option value="">'.$this->text->setLabel("LBL_SELECT").'</option>');						$this->cursor->freeResult();						$this->cursor->consultExecute($this->sql->setSentence("00016"));                        while($this->cursor->next($this->cursor->get()))                        $this->text->setBuffer('<option value="'.$this->cursor->getParameter("claseglosa").'">'.$this->cursor->getParameter("claseglosa").'</option>');                        $this->cursor->freeResult();         $this->text->setBuffer('</select>				    </td>		           	        </tr>					<tr>	                        <td class="ui-state-default" align="right">* Observaci&oacute;n:</td>            	          <td><textarea class="required" id="ObservacionGlosa" name="ObservacionGlosa" '.$this->data->getParameter("GUI_CONTROL").' value="" cols="45" rows="5"></textarea></td>                           </tr>					<tr>	                        <td class="ui-state-default" align="right">Glosa Todo:</td>            	        <td>No<input type="radio" name="Todo" value="si" checked onClick="Data.change(\'VrGlosa\',\'\')"> 						    SI<input type="radio" name="Todo" value="no" onClick="Data.change(\'VrGlosa\',\''.$this->data->getThousand($this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),1)).'\')">						</td>  		            </tr>                    <tr>	                        <td class="ui-state-default" align="right" height="5px" style="vertical-align:sub;">* Valor Glosar:</td>            	          <td ><input class="required" type="text" id="VrGlosa" name="VrGlosa" '.$this->data->getParameter("GUI_CONTROL").' value=""><script>Data.mask("VrGlosa");</script></td>                           </tr>					<tr align="center">         		           <td class="ui-state-default" colspan="2"><a href="#" id="filingSaveReasonGlosse" class="ui-button ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" onclick="Filing.saveReasonGlosse();"><span class="ui-button-text" >Guardar</span></a></td>         	        </tr>         	       </table>				   <input type="hidden" id="Compania" name="Compania" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),3).'">				   <input type="hidden" id="NoFac" name="NoFac" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),0).'">');					$this->cursor->consultExecute($this->sql->setSentence("00019",$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),0)));					$this->cursor->next($this->cursor->get()); 				    $this->text->setBuffer('<input type="hidden" id="Saldo" name="Saldo" value="'.$this->cursor->getParameter("vrglosatotal").'">');  				    $this->text->setBuffer('<input type="hidden" id="VTotal" name="VTotal" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),1).'">											<input type="hidden" id="Usuario" name="Usuario" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),2).'"></form>			       </td>              </tr>              <tr>                <td colspan="2">                 <div id="viewSaveReasonGlosse">				 <form id="confirmFilingDelete"><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th>C&oacute;digo Glosa</th>										<th>Observaciones</th>										<th>Valor Glosa</th>										<th>Borrar</th>									</tr>								</thead>								<tbody>');						  $this->cursor->freeResult();								  $this->cursor->consultExecute($this->sql->setSentence("00017",$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),0)));						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())): 							    $this->text->setBuffer('<tr align="center" bgColor="#f4e5e5">													    <td>'.$this->_var->get("ID").'</td>														<td>'.$this->cursor->getParameter("tipoglosa").'</td>													    <td>'.$this->cursor->getParameter("observacionglosa").'</td>													    <td align="right">'.$this->cursor->getDecimal("vrglosa").'</td>														<td><img style="scroll: 10px center;" src="../Imgs/b_drop.png" title="" alt="" onclick="Filing.deleteReasonGlosse(\''.$this->cursor->getParameter("numeroglosa").'\')"/></td>														</tr>');										        if($this->cursor->getParameter("vrglosa")>=1):						           $this->Total=($this->Total+$this->cursor->getParameter("vrglosa"));	                               $this->missing=$this->cursor->getParameter("vrtotal");							       $this->missing=($this->missing-$this->Total);							           endif;									$this->_var->increment("ID");						        endwhile;						  $this->cursor->freeResult(); 						  $this->cursor->consultExecute($this->sql->setSentence("00018",$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),3),$this->_var->processExplode("/",$this->request->getVar("STRING_R_G"),0)));						  $this->cursor->next($this->cursor->get());				$this->text->setBuffer('<tr>												  <td colspan="3"></td>															  <td align="left" class="ui-state-default">Total Valor Glosas</td>												  <td align="left" class="ui-state-default">Valor Restante</td>															  </tr>												  <tr>												  <td colspan="3"></td>															  <td align="right" class="ui-widget-content">'.$this->data->getDecimal($this->Total).'</td>												  <td align="right" class="ui-widget-content">'.$this->data->getDecimal($this->missing).'</td>															  </tr>												  <tr align="center">												  <td colspan="1"></td>															  <td class="ui-state-default">N&uacute;mero Documento</td>												  <td class="ui-state-default">Fecha Creaci&oacute;n de Documento</td>												  <td class="ui-state-default">Fecha Recibo Notificaci&oacute;n</td>												  												  </tr>												  <tr align="center">												  <td colspan="1"></td>															  <td class="ui-widget-content">'.$this->cursor->getParameter("numero").'</td>												  <td class="ui-widget-content">'.$this->cursor->getParameter("fecharasis").'</td>												  <td class="ui-widget-content">'.$this->cursor->getParameter("fechanotificacion").'</td>												  												  </tr>		  				     </tbody></table></div></form>							 </div>                </td>              </tr>			                </table>');			           $this->cursor->freeResult();                       }//End confirmMakeGlosses method						   	  private function saveReasonGlosse(){	                   if(!$this->request->getVar("TOTAL")){	                   $this->cursor->consultExecute($this->sql->setSentence("00045",																			 $this->request->getVar("COMPANY"),																			 $this->request->getVar("NO_INVOICE")));					   $this->cursor->next($this->cursor->get());					   $this->_var->set("TOTAL", $this->cursor->getParameter("total"));					   }else $this->_var->set("TOTAL",$this->request->getVar("TOTAL"));					   $this->cursor->consultExecute($this->sql->setSentence("00020",																			 $this->request->getVar("COMPANY"),																			 $this->request->getVar("TYPE_GLOSSE"),																			 $this->request->getVar("NO_INVOICE")));					   $this->cursor->next($this->cursor->get());					      if($this->cursor->getParameter("tipoglosa")==$this->request->getVar("TYPE_GLOSSE"))						     $this->text->setBuffer('false|<script>Utility.acceptBox("'.$this->_var->format($this->text->setLabel("MSG_SELECT"),"C&oacute;digo Glosa: ".$this->request->getVar("TYPE_GLOSSE")."").'");Request.setValue("TipoGlosa","'.$this->request->getVar("TYPE_GLOSSE").'");Request.setValue("ClaseGlosa","'.$this->request->getVar("CLASS_GLOSSE").'");Request.setValue("ObservacionGlosa","'.$this->request->getVar("OBS_GLOSSE").'");Request.setValue("VrGlosa","'.$this->request->getVar("VALUE_GLOSSE").'");Request.initialize();</script>|'.$this->request->getVar("NO_INVOICE").'//'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'/');							 else{							     //if($this->request->getVar("VALUE_GLOSSE")<=$this->request->getVar("BALANCE")||$this->request->getVar("VALUE_GLOSSE")<=$this->request->getVar("TOTAL"))									$this->cursor->consultExecute($this->sql->setSentence("00021",																			 $this->request->getVar("COMPANY"),																			 $this->request->getVar("TYPE_GLOSSE"),																			 $this->request->getVar("CLASS_GLOSSE"),																			 $this->request->getVar("OBS_GLOSSE"),																			 $this->_var->get("TOTAL"),																			 $this->request->getVar("VALUE_GLOSSE"),																			 $this->data->setTime(),																			 $this->request->getVar("USER"),																			 $this->request->getVar("NO_INVOICE")));									$this->cursor->consultExecute($this->sql->setSentence("00022",$this->request->getVar("COMPANY"),$this->request->getVar("NO_INVOICE")));								    if(!$this->cursor->next($this->cursor->get()))									   $this->cursor->consultExecute($this->sql->setSentence("00023",$this->request->getVar("COMPANY"),$this->request->getVar("NO_INVOICE")));								  $this->text->setBuffer('1|<script>Utility.acceptBox("'.$this->text->setLabel("MSG_DATA_SAVE").'");</script>|'.$this->request->getVar("NO_INVOICE").'//'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'/');	   								  }//end else                       $this->cursor->freeResult();								  					   }//End saveReasonGlosse method      private function deleteReasonGlosse(){					   $this->cursor->consultExecute($this->sql->setSentence("00024",																			 $this->request->getVar("COMPANY"),																			 $this->request->getVar("TYPE_GLOSSE"),																			 $this->request->getVar("NO_INVOICE")));					   if($this->cursor->get())						  $this->text->setBuffer('<script>Utility.acceptBox("'.$this->text->setLabel("MSG_DELETE").'");</script>|'.$this->request->getVar("NO_INVOICE").'//'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'|');	 					   $this->cursor->freeResult();					   }//End deleteReasonGlosse method      private function saveNoticeGlosse(){					   $this->cursor->consultExecute($this->sql->setSentence("00026",																			 $this->request->getVar("NO_GLOSSE"),																			 $this->request->getVar("DATE_GLOSSE"),																			 $this->request->getVar("DATE_NOTICE"),																			 $this->request->getVar("COMPANY"),																			 $this->request->getVar("NO_INVOICE")));					   if($this->cursor->get())						  $this->text->setBuffer(''.$this->request->getVar("NO_INVOICE").'//'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'|<script>Utility.acceptBox("'.$this->text->setLabel("MSG_DATA_SAVE").'");</script>');	                       $this->cursor->freeResult();						  					   }//End saveNoticeGlosse method					   				         //***********************************************************************************************************      //RESPONSE_GLOSSES*******************************************************************************************	  private function responseGlossesView() {					   $this->text->setBuffer('					   <link rel="stylesheet" type="text/css" href="css/blitzer/jquery.fancybox-1.2.6.css" media="screen" />					   <script type="text/javascript" src="js/jquery.fancybox-1.2.6.pack.js"></script>					   <script>Data.table("exampleReceivingGlossesData"); Text.hide("responseReportGlosse");Utility.fancyBox("responseGlossesRecordView");</script>					   <div class="display ui-state-default"><table class="display ui-state-default ui-corner-all" id="exampleReceivingGlossesData">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th title="Glosar">G</th>										<th>Informe<input type="checkbox" id="checkAll" name="checkAll" onclick="Data.checkAll(this.id); Filing.showResponseReportGlosses(0)"" title="Seleccionar Todos"/>										    <div id="responseReportGlosse"><span class="ui-state-default" align="center" style="cursor:pointer" onClick="Filing.makeResponseReportGlosses()"><img src="../Imgs/s_vars.png">Realizar</span></div></th>										<th>No Factura</th>										<th>Fecha Factura</th>										<th>Fecha Radicaci&oacute;n</th>										<th>Entidad</th>										<th>Respuesta. Glosa</th>										<th>Valor Factura</th>										<th>Valor Glosa</th>										<th>Valor Aceptado IPS</th>										<th>Valor Objetado No aceptado IPS</th>										<th>Valor a Pagar EPS</th>										<th>N&uacute;mero Informe</th>										<th>Fecha Informe</th>									</tr>								</thead>								<tbody>');							                          if($this->request->getVar("INVOICE_I"))  $this->_var->set("INVOICE_I"  ,"AND nofactura>='".$this->request->getVar("INVOICE_I")."'");						  if($this->request->getVar("INVOICE_F"))  $this->_var->set("INVOICE_F"  ,"AND nofactura<='".$this->request->getVar("INVOICE_F")."'");						  if($this->request->getVar("ENTITY"))     $this->_var->set("ENTITY"     ,"AND entidad='".$this->request->getVar("ENTITY")."'");						  if($this->request->getVar("CONTRACT"))   $this->_var->set("CONTRACT"   ,"AND contrato='".$this->request->getVar("CONTRACT")."'");						  if($this->request->getVar("NO_CONTRACT"))$this->_var->set("NO_CONTRACT","AND nocontrato='".$this->request->getVar("NO_CONTRACT")."'");						  $this->cursor->consultExecute($this->sql->setSentence("00013",							  													   $this->request->getVar("COMPANY"),																				   $this->request->getVar("DATE_INI"),																				   $this->request->getVar("DATE_END"),																				   $this->request->getVar("COMPANY"),													  																				   $this->_var->get("INVOICE_I"),																				   $this->_var->get("INVOICE_F"),																				   $this->_var->get("ENTITY"),																				   $this->_var->get("CONTRACT"),																				   $this->_var->get("NO_CONTRACT")));						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())):							    $this->text->setBuffer('<tr align="center">													    <td>'.$this->_var->get("ID").'</td>														<td><input type="radio" id="responseGlosar_'.$this->_var->get("ID").'" name="responseGlosar" value="'.$this->cursor->getParameter("nofactura").'/'.$this->cursor->getParameter("total").'/'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'" title="Glosar" onClick="Filing.makeResponseGlosses(0)"></td>														<td><script>Text.hide("responseReportGlosse_'.$this->_var->get("ID").'");</script>														    <input type="checkbox" id="InfGlos_'.$this->_var->get("ID").'" name="InfGlos" title="" value="'.$this->cursor->getParameter("nofactura").'" onClick="Filing.showResponseReportGlosses('.$this->_var->get("ID").')">															<div id="responseReportGlosse_'.$this->_var->get("ID").'" name="responseReportGlosse_view"><span class="ui-state-default" align="center" style="cursor:pointer" onClick="Filing.makeResponseReportGlosses()"><img src="../Imgs/s_vars.png">Realizar</span></div>');															if($this->cursor->getParameter("numeroinforme")&&$this->cursor->getParameter("fecharasis"))$this->text->setBuffer('OK');															$this->text->setBuffer('</td>');														if($this->cursor->getParameter("numeroinforme")&&$this->cursor->getParameter("fecharasis")){																													$this->cursor->getParameter("nufactura")==$this->cursor->getParameter("nofactura")?														$this->text->setBuffer('<td id="move_'.$this->_var->get("ID").'" style="cursor:pointer;"><a href="Glosas/RespuestaGlosaphp.php?NoFac='.$this->cursor->getParameter("nofactura").'&Compania='.$this->request->getVar("COMPANY").'&User='.$this->request->getVar("USER").'&NReport='.$this->cursor->getParameter("numeroinforme").'" id="responseGlossesRecordView_'.$this->_var->get("ID").'">'.$this->cursor->getParameter("nofactura").'</a><script>Text.highLight("move_'.$this->_var->get("ID").'");Utility.fancyBox("responseGlossesRecordView_'.$this->_var->get("ID").'",false);</script></td>'):														$this->text->setBuffer('<td style="cursor:pointer;"><a href="Glosas/RespuestaGlosaphp.php?NoFac='.$this->cursor->getParameter("nofactura").'&Compania='.$this->request->getVar("COMPANY").'&User='.$this->request->getVar("USER").'&NReport='.$this->cursor->getParameter("numeroinforme").'" id="responseGlossesRecordView" title="Formato de Respuesta">'.$this->cursor->getParameter("nofactura").'</a></td>');;													    }else $this->text->setBuffer('<td>'.$this->cursor->getParameter("nofactura").'</td>');														$this->text->setBuffer('<td>'.$this->_var->processExplode(" ",$this->cursor->getParameter("fechacrea"),0).'</td>														<td>'.$this->cursor->getParameter("fecharadic").'</td>														<td align="right">'.$this->cursor->getParameter("noment").'</td>														<td>Cod. '.$this->cursor->getParameter("codigo").'<br>'.$this->cursor->getParameter("detalle").'</td>														<td align="right">'.$this->cursor->getDecimal("total").'</td>														<td align="right">'.$this->cursor->getDecimal("gloss_val").'</td>														<td align="right">'.$this->cursor->getDecimal("gloss_acc_val").'</td>														<td>'.$this->data->getDecimal($this->cursor->getParameter("gloss_val")-$this->cursor->getParameter("gloss_acc_val")).'</td>														<td>'.$this->data->getDecimal($this->cursor->getParameter("total")-$this->cursor->getParameter("gloss_acc_val")).'</td>														<td>'.$this->cursor->getParameter("numeroinforme").'</td>														<td>'.$this->cursor->getParameter("fecharasis").'</td></tr>');						  $this->_var->increment("ID");						  endwhile;						  $this->cursor->freeResult();						  if($this->_var->get("ID",1)==1)						     $this->text->setBuffer('<script>Utility.acceptBox("'.$this->_var->format($this->text->setLabel("MSG_THERE_NOT"),"Facturas Sin Radicar").'");</script>');						 $this->text->setBuffer('</tbody></table>						 <script>Text.hide("specialResponseReportGlosses"); Utility.easyJQ("specialResponseReportGlosses","draggable");</script>				 <div id="specialResponseReportGlosses" '.$this->data->getParameter("GUI_TOP_RIGHT").'><form id="saveResponseReportGlosses">				    <table '.$this->data->getParameter("GUI").' class="ui-widget-content  ui-corner-all">					    <tr align="center">								<td class="ui-widget-header ui-corner-all" colspan="2" height="40px" style="cursor:move;">Formato de Respuesta de Glosa</td>       						</tr>						<tr>						  <td>					<form id="saveNoticeGlosse">						<table class="ui-state-highlight ui-corner-all">					<tr>					   <td width="100%" class="ui-state-default" align="right">* Encabezado Informe:</td>  		               <td><textarea class="required" id="EncabezadoInforme" name="EncabezadoInforme" '.$this->data->getParameter("GUI_CONTROL").' cols="45" rows="2" onKeyUp="Text.line(\'EncabezadoInforme\',\'<br>\')"></textarea></td> 					</tr>					<tr>					   <td width="100%" class="ui-state-default" align="right">* Pie de P&aacute;gina:</td>  		               <td><textarea class="required" id="FirmaInforme" name="FirmaInforme" '.$this->data->getParameter("GUI_CONTROL").' cols="45" rows="2" onKeyUp="Text.line(\'FirmaInforme\',\'<br>\')"></textarea></td> 					</tr>					<tr>					   <td width="100%" class="ui-state-default" align="right">* N&uacute;mero Informe:</td>  		               <td><input type="text" class="required" id="NumeroInforme" name="NumeroInforme" '.$this->data->getParameter("GUI_CONTROL").' value=""></td> 					</tr>		            <tr class="ui-state-default" align="center">				               <td colspan="6"><a href="#" id="filingSaveResponseReportGlosses" class="ui-button ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" onClick="Filing.saveResponseReportGlosses()"><span class="ui-button-text" >Realizar Informe</span></a></td>		            </tr>	              </table>				  <input type="hidden" id="Compania" name="Compania" value="'.$this->request->getVar("COMPANY").'">				  <input type="hidden" id="Usuario" name="Usuario" value="'.$this->request->getVar("USER").'">				  <input type="hidden" id="NoFac" name="NoFac" value="">				  </form></td></tr></table></form></div>');			                       }//End responseGlossesView method      private function makeResponseGlosses(){              $this->text->setBuffer('<table width="100%" align="center"> 			  <tr>	                <td width="20%" class="ui-state-default" align="right">No. Fac:</td>            	<td width="50%" class="ui-state-active">'.$this->_var->processExplode("/",$this->request->getVar("STRING_Res_G"),0).'</td>                     </tr>              <tr>                <td colspan="2">                 <div id="viewSaveMakeResponseGlosse">				 <form id="saveMakeResponseGlosse"><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th>C&oacute;digo Glosa</th>										<th>Nombre</th>										<th>Valor Glosa</th>										<th>Valor Glosa Aceptada</th>										<th>C&oacute;digo Respuesta Glosa</th>										<th>Observaci&oacute;n</th>										<th>OK</th>									</tr>								</thead>								<tbody>');						  $this->cursor->consultExecute($this->sql->setSentence("00049"));						  while($this->cursor->next($this->cursor->get()))							    $this->_var->VCRESGLOSS[]='<option value="'.$this->cursor->getParameter("codigo").'">'.$this->cursor->getParameter("detalle").'</option>';						  $this->cursor->consultExecute($this->sql->setSentence("00014",$this->_var->processExplode("/",$this->request->getVar("STRING_Res_G"),3),$this->_var->processExplode("/",$this->request->getVar("STRING_Res_G"),0)));						  $this->_var->set("ID",1);						  $this->_var->set("RES_GLOSS",1);						  while($this->cursor->next($this->cursor->get())): 							    $this->text->setBuffer('<tr align="center" bgColor="#f4e5e5">													    <td>'.$this->_var->get("ID").'</td>														<td>'.$this->cursor->getParameter("tipoglosa").'</td>													    <td>'.$this->cursor->getParameter("detalle").'</td>													    <td align="right" width="18%">'.$this->cursor->getDecimal("vrglosa").'														                              <input type="hidden" id="VGlosa_'.$this->_var->get("ID").'" name="VGlosa" value="'.$this->cursor->getParameter("vrglosa").'"></td>														<td align="right"><input type="hidden" id="NoFac_'.$this->_var->get("ID").'" name="NoFac" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_Res_G"),0).'">																		  <input type="hidden" id="TipoGlosa_'.$this->_var->get("ID").'" name="TipoGlosa" value="'.$this->cursor->getParameter("tipoglosa").'">																		  <input type="hidden" id="NumeroGlosa_'.$this->_var->get("ID").'" name="NumeroGlosa" value="'.$this->cursor->getParameter("numeroglosa").'">														                  <input type="text" id="ValorAceptado_'.$this->_var->get("ID").'" name="ValorAceptado" '.$this->data->getParameter("GUI_CONTROL").' size="15" value="'.$this->cursor->getThousand("aceptaglosa").'"><script>Data.mask("ValorAceptado_'.$this->_var->get("ID").'");</script></td><td>');						  $this->cursor->getParameter("codrespuestaglosa")?$this->text->setBuffer('<script>Request.setValue("codResGloss_'.$this->_var->get("ID").'",'.$this->cursor->getParameter("codrespuestaglosa").',false);</script>'):null;;						  $this->text->setBuffer('<select id="codResGloss_'.$this->_var->get("ID").'" name="codResGloss" '.$this->data->getParameter("GUI_CONTROL").'>														    <option value="">'.$this->text->setLabel("LBL_SELECT").'</option>');					      for($this->_var->get("RES_GLOSS")-1;						      $this->_var->get("RES_GLOSS")-1<$this->_var->getSize($this->_var->VCRESGLOSS);						      $this->text->setBuffer($this->_var->VCRESGLOSS[$this->_var->get("RES_GLOSS")-1]),						      $this->_var->increment("RES_GLOSS"));						  $this->_var->reset("RES_GLOSS");				          $this->text->setBuffer('</select></td>							                        <td><textarea id="ArguAceptado_'.$this->_var->get("ID").'" name="ArguAceptado" '.$this->data->getParameter("GUI_CONTROL").' cols="45" rows="2">'.$this->cursor->getParameter("obseraceptado").'</textarea></td>														<td><img style="scroll: 10px center; cursor:pointer;" src="Imgs/b_check.png" title="" alt="" onclick="Filing.saveMakeResponseGlosse(\''.$this->_var->get("ID").'\')"/></td>														</tr>');								$this->_var->increment("ID");						        endwhile;						  $this->cursor->freeResult(); 						  						  $this->cursor->consultExecute($this->sql->setSentence("00015",$this->_var->processExplode("/",$this->request->getVar("STRING_Res_G"),0)));						  while($this->cursor->next($this->cursor->get()))						        if($this->cursor->getParameter("vrglosa")>=1):						           $this->Total=($this->Total+$this->cursor->getParameter("vrglosa"));								   $this->TotalAccepted=($this->TotalAccepted+$this->cursor->getParameter("aceptaglosa"));	                               $this->missing=$this->cursor->getParameter("vrtotal");							       $this->missing=($this->Total-$this->missing);							           $this->objected=($this->Total-$this->TotalAccepted);								   $this->responseValue=($this->_var->processExplode("/",$this->request->getVar("STRING_Res_G"),1)-$this->TotalAccepted);								   endif;						  $this->cursor->freeResult();				     $this->text->setBuffer('<tr>												 <td colspan="3"></td>															 <td align="left" class="ui-state-default">Total Glosas</td>												 <td align="left" class="ui-state-default">Valor Aceptado</td>															 </tr>												 <tr>												 <td colspan="3"></td>															 <td align="right" class="ui-widget-content">'.$this->data->getDecimal($this->Total).'</td>												 <td align="right" class="ui-widget-content">'.$this->data->getDecimal($this->TotalAccepted).'</td>															 </tr>');		  				     $this->text->setBuffer('</tbody></table></div><input type="hidden" id="User" name="Usuario" size="15" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_Res_G"),2).'">																   <input type="hidden" id="Compania" name="Compania" size="15" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_Res_G"),3).'"></form>							 </div>                </td>              </tr>			                </table>');                       }//End makeResponseGlosses method      private function saveMakeResponseGlosse(){					   !$this->request->getVar("VALUE_ACCEPTED")?$this->_var->set("VALUE_ACCEPTED","null"):$this->_var->set("VALUE_ACCEPTED",$this->request->getVar("VALUE_ACCEPTED"));;					   $this->cursor->consultExecute($this->sql->setSentence("00052",$this->request->getVar("COMPANY"),$this->request->getVar("NO_INVOICE")));					   $this->cursor->next($this->cursor->get());					   $this->_var->set("TOT_VALUE",($this->_var->get("VALUE_ACCEPTED")+$this->cursor->getParameter("tot_glosse")));					   $this->_var->set("TOT_GLOSSE",$this->cursor->getParameter("tot_glosse"));					   if($this->_var->get("TOT_VALUE")<$this->cursor->getParameter("vrtotal")){					   					   $this->cursor->consultExecute($this->sql->setSentence("00053",$this->request->getVar("COMPANY"),$this->request->getVar("NO_INVOICE"),$this->request->getVar("NO_GLOSSE")));					   $this->cursor->next($this->cursor->get());					    $this->_var->set("TOT_VALUE_GLOSSE",($this->_var->get("VALUE_ACCEPTED")+$this->cursor->getParameter("tot_glosse_acept")));					   					   if($this->_var->get("TOT_VALUE_GLOSSE")<=$this->cursor->getParameter("tot_glosse")){ 						  $this->cursor->consultExecute($this->sql->setSentence("00007",																			    $this->_var->get("VALUE_ACCEPTED"),																				$this->request->getVar("ARG_ACCEPTED"),																				$this->request->getVar("COD_RES_GLOSS"),																				$this->request->getVar("TYPE_GLOSSE"),																				$this->request->getVar("NO_INVOICE"),																				$this->request->getVar("NO_GLOSSE")));						   if($this->cursor->get())							  $this->text->setBuffer('<br>|'.$this->request->getVar("NO_INVOICE").'//'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'|<script>Utility.acceptBox("'.$this->text->setLabel("MSG_DATA_SAVE").'");</script>|show');							   } else $this->text->setBuffer('<br>|'.$this->request->getVar("NO_INVOICE").'//'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'|<script>Utility.acceptBox(Text.sprintf(Text.LESS_TO,"Valor Glosa Aceptada","Valor Glosa"));</script>|');					   					   }else $this->text->setBuffer('<br>|'.$this->request->getVar("NO_INVOICE").'//'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'|<script>Utility.acceptBox(Text.sprintf(Text.LESS_TO,"Valor Glosa Aceptada","valor de la Factura"));</script>|');					   $this->cursor->freeResult();					   }//End saveMakeResponseGlosse method	      private function saveResponseReportGlosses(){                       $this->_var->set("STRING_R_R_G",1);					   for($this->_var->get("STRING_R_R_G")-1;						   $this->_var->get("STRING_R_R_G")-1<$this->_var->getSize($this->fetchStringR_R_G=$this->_var->getExplode(",",$this->request->getVar("STRING_R_R_G")));						   $this->_var->setElementAtList($this->fetchStringR_R_G[$this->_var->get("STRING_R_R_G")-1]),						   $this->_var->increment("STRING_R_R_G"));					   $this->_var->set("SAVE",1);					   for($this->_var->get("SAVE")-1;						   $this->_var->get("SAVE")-1<$this->_var->getSize($this->_var->getSizeList());						   $this->addResponseReportGlosses($this->request->getVar("NO_REPORT"),														   $this->request->getVar("COMPANY"),														   $this->data->setTime(),														   $this->request->getVar("USER"),														   $this->request->getVar("REPORT_HEADER"),														   $this->request->getVar("SIGNATURE_REPORT"),														   $this->_var->getElementAtList($this->_var->get("SAVE")-1)),						   $this->_var->increment("SAVE"));					   }//End save method	  private function addResponseReportGlosses($noReport=null,$company=null,$time=null,$user=null,$reportHeader=null,$signatureHeader=null,$noInvoice=null){					   $this->cursor->consultExecute($this->sql->setSentence("00043",																			 $company,																			 $noInvoice));					   $this->cursor->next($this->cursor->get());					   if($this->cursor->getParameter("nufactura")) 						  $this->cursor->consultExecute($this->sql->setSentence("00044",																			 $noReport,																			 $time,																			 $user,																			 $reportHeader,																			 $signatureHeader,																			 $company,																			 $noInvoice));					   else					   $this->cursor->consultExecute($this->sql->setSentence("00027",																			 $noReport,																			 $company,																			 $time,																			 $user,																			 $reportHeader,																			 $signatureHeader,																			 $noInvoice));					   if($this->cursor->get())						  $this->text->setBuffer('<script>Utility.acceptBox("'.$this->text->setLabel("MSG_DATA_SAVE").'");</script>');                       $this->cursor->freeResult();                       }//End addFiling method	      //***********************************************************************************************************      //FILED_RESPONSE_GLOSSES*************************************************************************************	  private function filedResponseGlossesView() {                       $this->text->setBuffer('<form id="confirmFiledResponseGlosses"><table align="center" class="ui-state-default">												 <tr>													   <td class="ui-widget-header"><a href="#" id="filingFiledResponseGlossesSave" class="ui-button ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" onclick="Filing.filedResponseGlossesSave()"><span class="ui-button-text" >Radicar</span></a></td>													   <td align="right">* No. Radicacion:</td>													   <td><input type="text" class="required" id="NumRad" name="NumRad" '.$this->data->getParameter("GUI_CONTROL").' size="10" value=""></td> 													   <td align="right">Fecha Radicaci&oacute;n:</td>													   <td><input type="text" readonly id="FechaRad" name="FechaRad" '.$this->data->getParameter("GUI_CONTROL").' size="10" value="'.$this->data->setDate("Y","m","d").'"><script>$(function(){Utility.date("FechaRad");});</script></td>          													</tr>												 </table>');						 $this->text->setBuffer('<script>Data.table("exampleFilingFiledResponseGlossesData");</script><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all" id="exampleFilingFiledResponseGlossesData">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th><input type="checkbox" id="checkAll" name="checkAll" onclick="Data.checkAll(this.id);" title="Seleccionar Todos"/></th>										<th>Fecha Factura</th>										<th>No. Factura</th>										<th>Entidad</th>										<th>Respuesta Glosa</th>										<th>Vr. Factura</th>										<th>Valor Glosa</th>										<th>Valor Aceptado IPS</th>										<th>Valor Objetado no Aceptado IPS</th>										<th>Valor a Pagar EPS</th>										<th>N&uacute;mero de Radicado</th>										<th>Fecha de Radicado</th>									</tr>								</thead>								<tbody>');					      if($this->request->getVar("INVOICE_I"))  $this->_var->set("INVOICE_I"  ,"AND nofactura>='".$this->request->getVar("INVOICE_I")."'");						  if($this->request->getVar("INVOICE_F"))  $this->_var->set("INVOICE_F"  ,"AND nofactura<='".$this->request->getVar("INVOICE_F")."'");						  if($this->request->getVar("ENTITY"))     $this->_var->set("ENTITY"     ,"AND entidad='".$this->request->getVar("ENTITY")."'");						  if($this->request->getVar("CONTRACT"))   $this->_var->set("CONTRACT"   ,"AND contrato='".$this->request->getVar("CONTRACT")."'");						  if($this->request->getVar("NO_CONTRACT"))$this->_var->set("NO_CONTRACT","AND nocontrato='".$this->request->getVar("NO_CONTRACT")."'");						  $this->cursor->consultExecute($this->sql->setSentence("00028",							  													   $this->request->getVar("COMPANY"),																				   $this->request->getVar("DATE_INI"),																				   $this->request->getVar("DATE_END"),																				   $this->request->getVar("COMPANY"),									  																				   $this->_var->get("INVOICE_I"),																				   $this->_var->get("INVOICE_F"),																				   $this->_var->get("ENTITY"),																				   $this->_var->get("CONTRACT"),																				   $this->_var->get("NO_CONTRACT")));															   						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())):							    $this->text->setBuffer('<tr align="center">													    <td>'.$this->_var->get("ID").'</td>														<td><input type="checkbox" id="SinRad_'.$this->_var->get("ID").'" name="SinRad" value="'.$this->cursor->getParameter("nofactura").'" title="Radicar">															<input type="hidden" id="FecFac_'.$this->_var->get("ID").'" name="FecFac" value="'.$this->_var->processExplode(" ",$this->cursor->getParameter("fechacrea"),0).'">');														if($this->cursor->getParameter("numrecepcionrespuesta")&&$this->cursor->getParameter("fecharespuesta"))$this->text->setBuffer('OK');													    $this->text->setBuffer('</td>													    <td>'.$this->_var->processExplode(" ",$this->cursor->getParameter("fechacrea"),0).'</td>													    <td>'.$this->cursor->getParameter("nofactura").'</td>													    <td>'.$this->cursor->getParameter("noment").'</td>														<td>Cod. '.$this->cursor->getParameter("codigo").'<br>'.$this->cursor->getParameter("detalle").'</td>													    <td align="right">'.$this->cursor->getDecimal("total").'</td>														<td align="right">'.$this->cursor->getDecimal("gloss_val").'</td>														<td align="right">'.$this->cursor->getDecimal("gloss_acc_val").'</td>														<td>'.$this->data->getDecimal($this->cursor->getParameter("gloss_val")-$this->cursor->getParameter("gloss_acc_val")).'</td>														<td>'.$this->data->getDecimal($this->cursor->getParameter("total")-$this->cursor->getParameter("gloss_acc_val")).'</td>														<td>'.$this->cursor->getParameter("numrecepcionrespuesta").'</td>														<td>'.$this->cursor->getParameter("fecharespuesta").'</td>													    </tr>');																  $this->_var->increment("ID");						  endwhile;						  $this->cursor->freeResult();						  if($this->_var->get("ID",1)==1)						     $this->text->setBuffer('<script>Utility.acceptBox("'.$this->_var->format($this->text->setLabel("MSG_THERE_NOT"),"Facturas Sin Radicar").'");</script>');						 $this->text->setBuffer('</tbody></table></form>');					                       }//End filedResponseGlossesView method	      	  private function filedResponseGlossesSave(){                       $this->_var->set("STRING_F_R_G",1);					   for($this->_var->get("STRING_F_R_G")-1;						   $this->_var->get("STRING_F_R_G")-1<$this->_var->getSize($this->fetchStringS_R=$this->_var->getExplode(",",$this->request->getVar("STRING_F_R_G")));						   $this->_var->setElementAtList($this->fetchStringS_R[$this->_var->get("STRING_F_R_G")-1]),						   $this->_var->increment("STRING_F_R_G"));		   					   $this->_var->set("SAVE",1);					   for($this->_var->get("SAVE")-1;						   $this->_var->get("SAVE")-1<$this->_var->getSize($this->_var->getSizeList());						   $this->addFilingFiledResponseGlossesSave($this->request->getVar("DATE_RAD"),																	$this->request->getVar("USER"),																	$this->request->getVar("NUM_RAD"),																    $this->_var->getElementAtList($this->_var->get("SAVE")-1),																	$this->request->getVar("COMPANY")),						   $this->_var->increment("SAVE"));					   }//End filedResponseGlossesSave method	  private function addFilingFiledResponseGlossesSave($dateFiling=null,$user=null,$noFiling=null,$noInvoice=null,$company=null){                       $this->cursor->consultExecute($this->sql->setSentence("00029",																			 $dateFiling,																			 $user,																			 $noFiling,																			 $noInvoice,																			 $company));					   if($this->cursor->get())						  $this->text->setBuffer('<script>Utility.acceptBox("'.$this->text->setLabel("MSG_DATA_SAVE").'");</script>');                       $this->cursor->freeResult();                       }//End addFilingFiledResponseGlossesSave method      //***********************************************************************************************************      //RECEIVING_RESPONSE_GLOSSES*************************************************************************************	  private function receivingResponseGlossesView() {                       $this->text->setBuffer('<script>Data.table("exampleFilingReceivingResponseGlossesData");</script><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all" id="exampleFilingReceivingResponseGlossesData">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th title="Glosar">G</th>										<th>Fecha Factura</th>										<th>No. Factura</th>										<th>Fecha Radicaci&oacute;n</th>										<th>Entidad</th>										<th>Respuesta Glosa</th>										<th>Vr. Factura</th>										<th>Valor Glosa</th>										<th>Valor Aceptado IPS</th>										<th>Valor Objetado no Aceptado IPS</th>										<th>Valor a Pagar EPS</th>										<th>Valor Reiterado</th>									</tr>								</thead>								<tbody>');					      if($this->request->getVar("INVOICE_I"))  $this->_var->set("INVOICE_I"  ,"AND nofactura>='".$this->request->getVar("INVOICE_I")."'");						  if($this->request->getVar("INVOICE_F"))  $this->_var->set("INVOICE_F"  ,"AND nofactura<='".$this->request->getVar("INVOICE_F")."'");						  if($this->request->getVar("ENTITY"))     $this->_var->set("ENTITY"     ,"AND entidad='".$this->request->getVar("ENTITY")."'");						  if($this->request->getVar("CONTRACT"))   $this->_var->set("CONTRACT"   ,"AND contrato='".$this->request->getVar("CONTRACT")."'");						  if($this->request->getVar("NO_CONTRACT"))$this->_var->set("NO_CONTRACT","AND nocontrato='".$this->request->getVar("NO_CONTRACT")."'");						  $this->cursor->consultExecute($this->sql->setSentence("00030",							  													   $this->request->getVar("COMPANY"),																				   $this->request->getVar("DATE_INI"),																				   $this->request->getVar("DATE_END"),																				   $this->request->getVar("COMPANY"),																				   $this->_var->get("INVOICE_I"),																				   $this->_var->get("INVOICE_F"),																				   $this->_var->get("ENTITY"),																				   $this->_var->get("CONTRACT"),																				   $this->_var->get("NO_CONTRACT")));															   						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())):							    $this->text->setBuffer('<tr align="center">													    <td>'.$this->_var->get("ID").'</td>														<td><input type="radio" id="Glosar_'.$this->_var->get("ID").'" name="Glosar" value="'.$this->cursor->getParameter("nofactura").'/'.$this->cursor->getParameter("total").'/'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'" title="Glosar" onClick="Filing.confirmMakeReceivingResponseGlosses(0)"></td>													    <td>'.$this->_var->processExplode(" ",$this->cursor->getParameter("fechacrea"),0).'</td>													    <td>'.$this->cursor->getParameter("nofactura").'</td>													    <td>'.$this->cursor->getParameter("fecharadic").'</td>														<td>'.$this->cursor->getParameter("noment").'</td>														<td align="right">Cod. '.$this->cursor->getParameter("codigo").'<br>'.$this->cursor->getParameter("detalle").'</td>													    <td align="right">'.$this->cursor->getDecimal("total").'</td>														<td align="right">'.$this->cursor->getDecimal("gloss_val").'</td>														<td align="right">'.$this->cursor->getDecimal("gloss_acc_val").'</td>														<td>'.$this->data->getDecimal($this->cursor->getParameter("gloss_val")-$this->cursor->getParameter("gloss_acc_val")).'</td>														<td>'.$this->data->getDecimal($this->cursor->getParameter("total")-$this->cursor->getParameter("gloss_acc_val")).'</td>														<td>'.$this->cursor->getDecimal("totalrecepcion").'</td>													    </tr>');						  $this->_var->increment("ID",1);						  endwhile;						  $this->cursor->freeResult();						  if($this->_var->get("ID",1)==1)						     $this->text->setBuffer('<script>Utility.acceptBox("'.$this->_var->format($this->text->setLabel("MSG_THERE_NOT"),"Facturas Sin Radicar").'");</script>');						 $this->text->setBuffer('</tbody></table>');					                       }//End receivingResponseGlossesView method					         private function confirmMakeReceivingResponseGlosses(){	  $this->text->setBuffer('<table width="100%" align="center"> 			  <tr>	                <td width="20%" class="ui-state-default" align="right">No. Fac:</td>            	<td width="50%" class="ui-state-active">'.$this->_var->processExplode("/",$this->request->getVar("STRING_Rec_G"),0).'</td>                     </tr>              <tr>                <td colspan="2">                 <div id="viewSaveMakeReceivingResponseGlosse">				 <form id="saveMakeReceivingResponseGlosse"><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th>C&oacute;digo Glosa</th>										<th>Clase Glosa</th>										<th>Observaci&oacute;n</th>										<th>Valor Glosa</th>										<th>Valor Glosa Aceptada</th>										<th>Observaci&oacute;n Glosa Aceptada</th>										<th>Estado</th>										<th>Valor</th>										<th>OK</th>									</tr>								</thead>								<tbody>');						  $this->cursor->consultExecute($this->sql->setSentence("00031",$this->_var->processExplode("/",$this->request->getVar("STRING_Rec_G"),3),$this->_var->processExplode("/",$this->request->getVar("STRING_Rec_G"),0)));						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())):							    $this->text->setBuffer('<tr align="center" bgColor="#f4e5e5">													    <td>'.$this->_var->get("ID").'</td>														<td>'.$this->cursor->getParameter("tipoglosa").'</td>													    <td>'.$this->cursor->getParameter("claseglosa").'</td>														<td>'.$this->cursor->getParameter("observacionglosa").'</td>														<td>'.$this->cursor->getDecimal("vrglosa").'</td>														<td>'.$this->cursor->getDecimal("aceptaglosa").'</td>														<td>'.$this->cursor->getParameter("obseraceptado").'</td>														<td><select id="ArguAceptado_'.$this->_var->get("ID").'" name="ArguAceptado">														    <option value="">'.$this->text->setLabel("LBL_SELECT").'</option>');								$this->cursor->getParameter("estadorecepcion")=="Aceptada"?$this->text->setBuffer('<option value="Aceptada" selected=selected>Aceptada</option><option value="Reiterada">Reiterada</option>'):$this->text->setBuffer('<option value="Aceptada">Aceptada</option><option value="Reiterada" selected=selected>Reiterada</option>');								$this->text->setBuffer('</select></td>														<td><input type="text" id="ValorAceptado_'.$this->_var->get("ID").'" name="ValorAceptado" size="15" value="'.$this->cursor->getThousand("valorrecepcion").'"><script>Data.mask("ValorAceptado_'.$this->_var->get("ID").'");</script>														    <input type="hidden" id="NoFac_'.$this->_var->get("ID").'" name="NoFac" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_Rec_G"),0).'">															<input type="hidden" id="TipoGlosa_'.$this->_var->get("ID").'" name="TipoGlosa" value="'.$this->cursor->getParameter("tipoglosa").'"></td>													    <td><img style="scroll: 10px center;" src="../Imgs/b_check.png" title="" alt="" onclick="Filing.saveMakeReceivingResponseGlosse(\''.$this->_var->get("ID").'\')"/></td>														</tr>');								$this->_var->increment("ID");						        endwhile;								$this->cursor->freeResult(); 						  $this->cursor->consultExecute($this->sql->setSentence("00032",$this->_var->processExplode("/",$this->request->getVar("STRING_Rec_G"),3),$this->_var->processExplode("/",$this->request->getVar("STRING_Rec_G"),0)));						  while($this->cursor->next($this->cursor->get()))						        $this->Total=$this->Total+$this->cursor->getParameter("valorrecepcion");								$this->cursor->freeResult();				     $this->text->setBuffer('<tr>												 <td colspan="7"></td>															 <td align="Right" class="ui-state-default">TOTAL:</td>												 <td align="Right" class="ui-widget-content">'.$this->data->getDecimal($this->Total).'												                                             <input type="hidden" id="TotalRecep" name="TotalRecep" value="'.$this->Total.'"></td>															 												 </tr></tbody></table><input type="hidden" id="Usuario" name="Usuario" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_Rec_G"),2).'">																	  <input type="hidden" id="cadenaRec_G" name="cadenaRec_G" value="'.$this->request->getVar("STRING_Rec_G").'"></div></form>							 </div>                </td>              </tr>			                </table>');                       }//End confirmMakeReceivingResponseGlosses method      private function saveMakeReceivingResponseGlosse(){					   $this->cursor->consultExecute($this->sql->setSentence("00033",																			 $this->request->getVar("ARG_ACCEPTED"),																			 $this->request->getVar("VALUE_ACCEPTED"),																			 $this->request->getVar("TYPE_GLOSSE"),																			 $this->request->getVar("NO_INVOICE")));					    $this->_var->set("STRING_V_A",1);					   for($this->_var->get("STRING_V_A")-1;						   $this->_var->get("STRING_V_A")-1<$this->_var->getSize($this->fetchStringV_A=$this->_var->getExplode(",",$this->request->getVar("STRING_V_A")));						   $this->_var->setElementAtList($this->fetchStringV_A[$this->_var->get("STRING_V_A")-1]),						   $this->_var->increment("STRING_V_A"));					   $this->_var->set("SAVE",1);					   for($this->_var->get("SAVE")-1;						   $this->_var->get("SAVE")-1<$this->_var->getSize($this->_var->getSizeList());						   $this->totalReception=($this->totalReception+$this->_var->getElementAtList($this->_var->get("SAVE")-1)),						   $this->_var->increment("SAVE"));					   $this->cursor->consultExecute($this->sql->setSentence("00034",																			 $this->totalReception,																			 $this->request->getVar("USER"),																			 $this->data->setTime(),																			 $this->request->getVar("NO_INVOICE")));														 					   if($this->cursor->get())						  $this->text->setBuffer('<script>Utility.acceptBox("'.$this->text->setLabel("MSG_DATA_SAVE").'");</script>');					   $this->cursor->freeResult();  					   }//End saveMakeReceivingResponseGlosse method      //***********************************************************************************************************      //RECEIVING_RESPONSE_GLOSSES*************************************************************************************	  private function conciliationGlossesView() {                       $this->text->setBuffer('<script>Data.table("exampleConciliationGlossesData");</script><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all" id="exampleConciliationGlossesData">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th title="Glosar">G</th>										<th>Fecha Factura</th>										<th>No. Factura</th>										<th>Fecha Radicaci&oacute;n</th>										<th>Entidad</th>										<th>Respuesta Glosa</th>										<th>Vr. Factura</th>										<th>Valor Glosa</th>										<th>Valor Aceptado IPS</th>										<th>Valor Objetado no Aceptado IPS</th>										<th>Valor a Pagar EPS</th>										<th>Valor Conciliaci&oacute;n</th>										<th>Observaci&oacute;n Conciliaci&oacute;n</th>									</tr>								</thead>								<tbody>');					      if($this->request->getVar("INVOICE_I"))  $this->_var->set("INVOICE_I"  ,"AND nofactura>='".$this->request->getVar("INVOICE_I")."'");						  if($this->request->getVar("INVOICE_F"))  $this->_var->set("INVOICE_F"  ,"AND nofactura<='".$this->request->getVar("INVOICE_F")."'");						  if($this->request->getVar("ENTITY"))     $this->_var->set("ENTITY"     ,"AND entidad='".$this->request->getVar("ENTITY")."'");						  if($this->request->getVar("CONTRACT"))   $this->_var->set("CONTRACT"   ,"AND contrato='".$this->request->getVar("CONTRACT")."'");						  if($this->request->getVar("NO_CONTRACT"))$this->_var->set("NO_CONTRACT","AND nocontrato='".$this->request->getVar("NO_CONTRACT")."'");						  $this->cursor->consultExecute($this->sql->setSentence("00030",							  													   $this->request->getVar("COMPANY"),																				   $this->request->getVar("DATE_INI"),																				   $this->request->getVar("DATE_END"),																				   $this->request->getVar("COMPANY"),																				   $this->_var->get("INVOICE_I"),																				   $this->_var->get("INVOICE_F"),																				   $this->_var->get("ENTITY"),																				   $this->_var->get("CONTRACT"),																				   $this->_var->get("NO_CONTRACT")));															   						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())):							    $this->text->setBuffer('<tr align="center">													    <td>'.$this->_var->get("ID").'</td>														<td><input type="radio" id="Glosar_'.$this->_var->get("ID").'" name="Glosar" value="'.$this->cursor->getParameter("nofactura").'/'.$this->cursor->getParameter("total").'/'.$this->request->getVar("USER").'/'.$this->request->getVar("COMPANY").'" title="Glosar" onClick="Filing.confirmMakeConciliationGlosses(0)"></td>													    <td>'.$this->_var->processExplode(" ",$this->cursor->getParameter("fechacrea"),0).'</td>													    <td>'.$this->cursor->getParameter("nofactura").'</td>													    <td>'.$this->cursor->getParameter("fecharadic").'</td>														<td>'.$this->cursor->getParameter("noment").'</td>														<td align="right">Cod. '.$this->cursor->getParameter("codigo").'<br>'.$this->cursor->getParameter("detalle").'</td>													    <td align="right">'.$this->cursor->getDecimal("total").'</td>														<td align="right">'.$this->cursor->getDecimal("gloss_val").'</td>														<td align="right">'.$this->cursor->getDecimal("gloss_acc_val").'</td>														<td>'.$this->data->getDecimal($this->cursor->getParameter("gloss_val")-$this->cursor->getParameter("gloss_acc_val")).'</td>														<td>'.$this->data->getDecimal($this->cursor->getParameter("total")-$this->cursor->getParameter("gloss_acc_val")).'</td>														<td>'.$this->cursor->getDecimal("valorconciliado").'</td>														<td>'.$this->cursor->getParameter("observacionconciliado").'</td>													    </tr>');																				  $this->_var->increment("ID");						  endwhile;						  $this->cursor->freeResult();						  if($this->_var->get("ID",1)==1)						     $this->text->setBuffer('<script>Utility.acceptBox("'.$this->_var->format($this->text->setLabel("MSG_THERE_NOT"),"Facturas Sin Radicar").'");</script>');						 $this->text->setBuffer('</tbody></table>');					                       }//End conciliationGlossesView method					   	  private function confirmMakeConciliationGlosses(){	  $this->text->setBuffer('<table width="100%" align="center"> 			  <tr>	                <td width="20%" class="ui-state-default" align="right">No. Fac:</td>            	<td width="50%" class="ui-state-active">'.$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),0).'</td>                     </tr>              <tr>                <td colspan="2">                 <div id="viewSaveMakeConciliationGlosse">				 <form id="saveMakeConciliationGlosse"><div class="display ui-state-default"><table class="display ui-state-default ui-corner-all">								<thead>									<tr class="ui-state-default">									    <th>#</th>										<th>C&oacute;digo Glosa</th>										<th>Tipo Auditoria</th>										<th>Valor Glosa</th>										<th>Valor Glosa Aceptada</th>										<th>Observaci&oacute;n Valor Aceptado</th>										<th>Estado Recepci&oacute;n</th>										<th>Valor Recepci&oacute;n</th>										<th>Valor Conciliaci&oacute;n</th>										<th>Observaci&oacute;n Conciliaci&oacute;n</th>										<th>OK</th>									</tr>								</thead>								<tbody>');						  $this->cursor->consultExecute($this->sql->setSentence("00035",$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),3),$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),0)));						  $this->_var->set("ID",1);						  while($this->cursor->next($this->cursor->get())):							    $this->text->setBuffer('<tr align="center" bgColor="#f4e5e5">													    <td>'.$this->_var->get("ID").'</td>														<td>'.$this->cursor->getParameter("tipoglosa").'</td>													    <td>'.$this->cursor->getParameter("claseglosa").'</td>														<td>'.$this->cursor->getDecimal("vrglosa").'</td>														<td>'.$this->cursor->getDecimal("aceptaglosa").'</td>														<td>'.$this->cursor->getParameter("observacionglosa").'</td>														<td>'.$this->cursor->getParameter("estadorecepcion").'</td>														<td>'.$this->cursor->getDecimal("valorrecepcion").'</td>														<td><input type="text" id="ValorAceptado_'.$this->_var->get("ID").'" name="ValorAceptado" size="15" value="'.$this->cursor->getThousand("valorconciliado").'" '.$this->data->getParameter("GUI_CONTROL").'><script>Data.mask("ValorAceptado_'.$this->_var->get("ID").'");</script>														    <input type="hidden" id="NoFac_'.$this->_var->get("ID").'" name="NoFac" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),0).'">															<input type="hidden" id="TipoGlosa_'.$this->_var->get("ID").'" name="TipoGlosa" value="'.$this->cursor->getParameter("tipoglosa").'"></td>													    <td><textarea id="ArguAceptado_'.$this->_var->get("ID").'" name="ArguAceptado" '.$this->data->getParameter("GUI_CONTROL").' cols="45" rows="2">'.$this->cursor->getParameter("observacionconciliado").'</textarea></td>														<td><img style="scroll: 10px center; cursor:pointer;" src="../Imgs/b_check.png" title="" alt="" onclick="Filing.saveMakeConciliationGlosse(\''.$this->_var->get("ID").'\')"/></td>														</tr>');								$this->_var->increment("ID");						        endwhile;								$this->cursor->freeResult(); 						  $this->cursor->consultExecute($this->sql->setSentence("00036",$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),3),$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),0)));						  while($this->cursor->next($this->cursor->get())){						        $this->TotalConV=$this->TotalConV+$this->cursor->getParameter("valorconciliado");								$this->_var->set("NO_GLOSSE",$this->cursor->getParameter("numeroglosa"));								}//end while								$this->cursor->freeResult();				     $this->text->setBuffer('<tr>												 <td colspan="7"></td>															 <td align="Right" class="ui-state-default">SUMA:</td>												 <td align="Right" class="ui-widget-content">'.$this->data->getDecimal($this->TotalConV).'												                                             <input type="hidden" id="TotalRecep" name="TotalRecep" value="'.$this->Total.'"></td>															 												 </tr></tbody></table><input type="hidden" id="Usuario" name="Usuario" value="'.$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),2).'">																	  <input type="hidden" id="cadenaCon_G" name="cadenaCon_G" value="'.$this->request->getVar("STRING_Con_G").'">																	  <input type="hidden" id="NumeroGlosa" name="NumeroGlosa" value="'.$this->_var->get("NO_GLOSSE").'">');					      $this->cursor->consultExecute($this->sql->setSentence("00039",$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),3),$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),0)));						  while($this->cursor->next($this->cursor->get()))						        if($this->cursor->getParameter("vrtotal")>=1):						           $this->TotalGV=($this->TotalGV+$this->cursor->getParameter("vrglosa"));	                               $this->missing=$this->cursor->getParameter("vrtotal");							       $this->missing=($this->missing-$this->TotalGV);								   $this->objected=($this->TotalConV-$this->TotalGV);								   $this->valueEPS=($this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),1)-$this->TotalConV);						           endif;								$this->cursor->freeResult();					$this->text->setBuffer('<input id="Objetado" name="Objetado" type="hidden" size="5"  value="'.$this->objected.'">										    <input id="ValorEPS" name="ValorEPS" type="hidden" size="5"  value="'.$this->valueEPS.'"></div></form>							 </div>                </td>              </tr>			                </table>');                       }//End confirmMakeConciliationGlosses method					   	  private function saveMakeConciliationGlosse(){					   !$this->request->getVar("VALUE_ACCEPTED")?$this->_var->set("VALUE_ACCEPTED","null"):$this->_var->set("VALUE_ACCEPTED",$this->request->getVar("VALUE_ACCEPTED"));;					   !$this->request->getVar("OBJECTED")?$this->_var->set("OBJECTED","null"):$this->_var->set("OBJECTED",$this->request->getVar("OBJECTED"));;					   $this->cursor->consultExecute($this->sql->setSentence("00054",$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),3),$this->request->getVar("NO_INVOICE")));					   $this->cursor->next($this->cursor->get());					   $this->_var->set("TOT_VALUE",($this->_var->get("VALUE_ACCEPTED")+$this->cursor->getParameter("tot_settle")));					   $this->_var->set("TOT_SETTLE",$this->cursor->getParameter("tot_settle"));					   if($this->_var->get("TOT_VALUE")<$this->cursor->getParameter("vrtotal")){					   					   $this->cursor->consultExecute($this->sql->setSentence("00055",$this->_var->processExplode("/",$this->request->getVar("STRING_Con_G"),3),$this->request->getVar("NO_INVOICE"),$this->request->getVar("NO_GLOSSE")));					   $this->cursor->next($this->cursor->get());					   $this->_var->set("TOT_VALUE_SETTLE",($this->_var->get("VALUE_ACCEPTED")+$this->cursor->getParameter("tot_settle")));								   if($this->_var->get("TOT_VALUE_SETTLE")<=$this->cursor->getParameter("tot_recep")){ 																																																																	    $this->cursor->consultExecute($this->sql->setSentence("00037",																			 $this->_var->get("VALUE_ACCEPTED"),																			 $this->request->getVar("ARG_ACCEPTED"),																			 $this->request->getVar("TYPE_GLOSSE"),																			 $this->request->getVar("NO_INVOICE"),																			 $this->request->getVar("NO_GLOSSE")));					    $this->_var->set("STRING_V_C",1);					   for($this->_var->get("STRING_V_C")-1;						   $this->_var->get("STRING_V_C")-1<$this->_var->getSize($this->fetchStringV_A=$this->_var->getExplode(",",$this->request->getVar("STRING_V_C")));						   $this->_var->setElementAtList($this->fetchStringV_A[$this->_var->get("STRING_V_C")-1]),						   $this->_var->increment("STRING_V_C"));					   $this->_var->set("SAVE",1);					   for($this->_var->get("SAVE")-1;						   $this->_var->get("SAVE")-1<$this->_var->getSize($this->_var->getSizeList());						   $this->totalConciliation=($this->totalConciliation+$this->_var->getElementAtList($this->_var->get("SAVE")-1)),						   $this->_var->increment("SAVE"));					   $this->cursor->consultExecute($this->sql->setSentence("00038",																			 $this->totalConciliation,																			 $this->request->getVar("USER"),																			 $this->data->setTime(),																			 $this->_var->get("OBJECTED"),																			 $this->request->getVar("VALUE_EPS"),																			 $this->request->getVar("NO_INVOICE")));														 					       if($this->cursor->get())							  $this->text->setBuffer('<br>|<script>Utility.acceptBox("'.$this->text->setLabel("MSG_DATA_SAVE").'");</script>|show');								  							 																				   } else $this->text->setBuffer('<br>|<script>Utility.acceptBox(Text.sprintf(Text.LESS_TO,"Valor Conciliaci&oacute;n","Valor Recepci&oacute;n"));</script>|');					   					   }else $this->text->setBuffer('<br>|<script>Utility.acceptBox(Text.sprintf(Text.LESS_TO,"Valor Conciliaci&oacute;n","valor de la Factura"));</script>|');					   $this->cursor->freeResult();  					   }//End saveMakeConciliationGlosse method	                  //***********************************************************************************************************}//End Filing class ?><?php   $Filing=Filing::getInstance();$Var->release($Filing,$Var);?>                                  